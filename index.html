<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Gacha Quiz Machine - Tr·∫Øc nghi·ªám c√≥ √Çm thanh</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
      color: #fff;
      text-align: center;
      margin: 0;
      padding: 20px;
    }
    .balls {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 15px;
      max-width: 400px;
      margin: 20px auto;
    }
    .ball {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: radial-gradient(circle, #4e9, #269);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 18px;
      cursor: pointer;
      transition: opacity 0.3s;
    }
    .ball.opened {
      background: gray;
      cursor: not-allowed;
      opacity: 0.5;
    }
    button {
      margin: 10px;
      padding: 10px 20px;
      font-size: 16px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
    #spinBtn { background: #6a5acd; color: white; }
    #retryBtn { background: #ff6347; color: white; }
    #questionBox {
      margin-top: 20px;
      padding: 15px;
      background: rgba(255,255,255,0.1);
      border-radius: 10px;
      display: none;
    }
    .option {
      display: block;
      margin: 8px auto;
      padding: 8px 15px;
      width: 200px;
      border-radius: 8px;
      background: #1e90ff;
      color: white;
      cursor: pointer;
    }
    .option:hover { background: #4682b4; }
  </style>
</head>
<body>
  <h1>üé∞ Gacha Quiz Machine (Tr·∫Øc nghi·ªám)</h1>
  <p>10 qu·∫£ c·∫ßu = 10 c√¢u h·ªèi. C√≥ nh·∫°c n·ªÅn & hi·ªáu ·ª©ng √¢m thanh!</p>

  <div class="balls" id="ballContainer"></div>

  <button id="spinBtn" onclick="spin()">Quay</button>
  <button id="retryBtn" onclick="resetGame()">üîÑ Th·ª≠ l·∫°i</button>

  <div id="questionBox">
    <h3>C√¢u h·ªèi</h3>
    <p id="questionText"></p>
    <div id="options"></div>
    <p id="result"></p>
  </div>

  <!-- üéµ Nh·∫°c n·ªÅn + hi·ªáu ·ª©ng √¢m thanh -->
  <audio id="bgMusic" loop autoplay>
    <source src="https://www.bensound.com/bensound-music/bensound-funkyelement.mp3" type="audio/mpeg">
  </audio>
  <audio id="correctSound">
    <source src="https://www.soundjay.com/buttons/sounds/button-09.mp3" type="audio/mpeg">
  </audio>
  <audio id="wrongSound">
    <source src="https://www.soundjay.com/buttons/sounds/button-10.mp3" type="audio/mpeg">
  </audio>

  <script>
    let questions = [
      {q: "L·ª±c H·∫•p d·∫´n t·ªìn t·∫°i gi·ªØa:", options: ["Tr√°i ƒê·∫•t v√† qu·∫£ t√°o", "M·∫∑t TrƒÉng v√† Tr√°i ƒê·∫•t", "Hai h·ªçc sinh trong l·ªõp", "T·∫•t c·∫£ tr∆∞·ªùng h·ª£p tr√™n"], answer: 4},
      {q: "Tr·ªçng l·ª±c l√† g√¨?", options: ["L·ª±c √©p c·ªßa v·∫≠t l√™n m·∫∑t ƒë·∫•t", "L·ª±c h√∫t Tr√°i ƒê·∫•t t√°c d·ª•ng l√™n v·∫≠t", "L·ª±c h√∫t gi·ªØa Tr√°i ƒê·∫•t v√† M·∫∑t TrƒÉng", "L·ª±c h√∫t c·ªßa m·ªçi v·∫≠t t√°c d·ª•ng l√™n Tr√°i ƒê·∫•t"], answer: 2},
      {q: "N·∫øu kh·ªëi l∆∞·ª£ng m·ªôt v·∫≠t tƒÉng g·∫•p ƒë√¥i th√¨ l·ª±c h·∫•p d·∫´n gi·ªØa n√≥ v√† Tr√°i ƒê·∫•t", options: ["Kh√¥ng ƒë·ªïi", "TƒÉng 2 l·∫ßn", "Gi·∫£m 2 l·∫ßn", "TƒÉng 4 l·∫ßn"], answer: 2},
      {q: "N·∫øu kho·∫£ng c√°ch gi·ªØa hai v·∫≠t tƒÉng g·∫•p 3, th√¨ l·ª±c h·∫•p d·∫´n:", options: ["Gi·∫£m 3 l·∫ßn", "Kh√¥ng gi·∫£m", "Gi·∫£m 6 l·∫ßn", "Gi·∫£m 9 l·∫ßn"], answer: 4},
    ];

    let remainingBalls = [], openedBalls = [], currentAnswer = -1;

    function initGame() {
      const container = document.getElementById("ballContainer");
      container.innerHTML = "";
      remainingBalls = [];
      openedBalls = [];
      for (let i = 1; i <= questions.length; i++) {
        const ball = document.createElement("div");
        ball.className = "ball";
        ball.textContent = i;
        container.appendChild(ball);
        remainingBalls.push(i);
      }
      document.getElementById("questionBox").style.display = "none";
    }

    function spin() {
      if (remainingBalls.length === 0) {
        alert("ƒê√£ m·ªü h·∫øt c√¢u h·ªèi! B·∫•m 'Th·ª≠ l·∫°i' ƒë·ªÉ ch∆°i l·∫°i.");
        return;
      }
      const index = Math.floor(Math.random() * remainingBalls.length);
      const ballNum = remainingBalls.splice(index, 1)[0];
      openedBalls.push(ballNum);
      const container = document.getElementById("ballContainer");
      const ball = container.children[ballNum - 1];
      ball.classList.add("opened");

      showQuestion(ballNum - 1);
    }

    function showQuestion(idx) {
      const q = questions[idx];
      document.getElementById("questionBox").style.display = "block";
      document.getElementById("questionText").textContent = q.q;
      currentAnswer = q.answer;
      const optionsDiv = document.getElementById("options");
      optionsDiv.innerHTML = "";
      q.options.forEach((opt, i) => {
        const btn = document.createElement("button");
        btn.className = "option";
        btn.textContent = opt;
        btn.onclick = () => checkAnswer(i);
        optionsDiv.appendChild(btn);
      });
      document.getElementById("result").textContent = "";
    }

    function checkAnswer(choice) {
      if (choice + 1 === currentAnswer) {
        document.getElementById("result").textContent = "‚úÖ Ch√≠nh x√°c!";
        document.getElementById("correctSound").play();
      } else {
        document.getElementById("result").textContent =
          "‚ùå Sai. ƒê√°p √°n ƒë√∫ng l√†: " + questions.find(q => q.answer === currentAnswer).options[currentAnswer - 1];
        document.getElementById("wrongSound").play();
      }
    }

    function resetGame() {
      initGame();
      alert("Game ƒë√£ ƒë∆∞·ª£c reset!");
    }

    // Kh·ªüi t·∫°o l·∫ßn ƒë·∫ßu
    initGame();
  </script>
</body>
</html>
