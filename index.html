// üéÅ Hi·ªáu ·ª©ng m·ªü h·ªôp c√≥ √¢m thanh
function showReward(idx) {
  const overlay = document.createElement("div");
  overlay.style.position = "fixed";
  overlay.style.top = "0";
  overlay.style.left = "0";
  overlay.style.width = "100%";
  overlay.style.height = "100%";
  overlay.style.background = "rgba(0,0,0,0.9)";
  overlay.style.display = "flex";
  overlay.style.flexDirection = "column";
  overlay.style.alignItems = "center";
  overlay.style.justifyContent = "center";
  overlay.style.zIndex = 9999;

  // khung bƒÉng chuy·ªÅn
  const frame = document.createElement("div");
  frame.style.width = "600px";
  frame.style.height = "150px";
  frame.style.overflow = "hidden";
  frame.style.border = "4px solid gold";
  frame.style.borderRadius = "12px";
  frame.style.background = "#111";
  frame.style.position = "relative";

  // bƒÉng chuy·ªÅn
  const carousel = document.createElement("div");
  carousel.style.display = "flex";
  carousel.style.gap = "10px";
  carousel.style.position = "absolute";
  carousel.style.left = "0";
  carousel.style.top = "20px";
  carousel.style.transition = "transform 4s cubic-bezier(0.25, 1, 0.5, 1)";

  // t·∫°o 20 ·∫£nh gi·∫£, ·∫£nh th·∫≠t n·∫±m ·ªü v·ªã tr√≠ 14
  for (let i = 0; i < 20; i++) {
    const img = document.createElement("img");
    img.src =
      i === 14
        ? `rewards/reward${idx + 1}.png`
        : `rewards/reward${Math.floor(Math.random() * 7) + 1}.png`;
    img.style.width = "120px";
    img.style.height = "120px";
    img.style.objectFit = "cover";
    img.style.borderRadius = "8px";
    carousel.appendChild(img);
  }

  frame.appendChild(carousel);
  overlay.appendChild(frame);

  // v·∫°ch ch·ªâ ƒë·ªãnh ph·∫ßn th∆∞·ªüng
  const pointer = document.createElement("div");
  pointer.style.position = "absolute";
  pointer.style.top = "0";
  pointer.style.left = "50%";
  pointer.style.transform = "translateX(-50%)";
  pointer.style.width = "4px";
  pointer.style.height = "150px";
  pointer.style.background = "red";
  frame.appendChild(pointer);

  document.body.appendChild(overlay);

  // chu·∫©n b·ªã √¢m thanh
  const tickSound = new Audio("sounds/tick.mp3");
  const winSound = new Audio("sounds/win.mp3");

  // ch·∫°y √¢m tick l·∫∑p l·∫°i khi bƒÉng chuy·ªÅn di chuy·ªÉn
  tickSound.loop = true;
  tickSound.play();

  // hi·ªáu ·ª©ng ch·∫°y bƒÉng chuy·ªÅn
  setTimeout(() => {
    carousel.style.transform = "translateX(-1400px)";
  }, 100);

  // sau khi d·ª´ng
  setTimeout(() => {
    tickSound.pause(); // d·ª´ng ti·∫øng tick
    winSound.play();   // ph√°t ti·∫øng tr√∫ng th∆∞·ªüng

    const msg = document.createElement("h2");
    msg.textContent = `üéâ B·∫°n nh·∫≠n ƒë∆∞·ª£c ph·∫ßn th∆∞·ªüng #${idx + 1}!`;
    msg.style.color = "gold";
    overlay.appendChild(msg);

    const btn = document.createElement("button");
    btn.textContent = "ƒê√≥ng";
    btn.style.marginTop = "20px";
    btn.style.padding = "10px 20px";
    btn.style.borderRadius = "8px";
    btn.style.background = "#6a5acd";
    btn.style.color = "white";
    btn.style.cursor = "pointer";
    btn.onclick = () => {
      overlay.remove();
      currentQuestion++;
      loadQuestion();
    };
    overlay.appendChild(btn);
  }, 4200);
}
